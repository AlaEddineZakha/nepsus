{% extends 'dashboard/dashboard1.html.twig' %}
{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('Template/assets/global/plugins/datatables/datatables.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('Template/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('Template/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('Template/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('Template/assets/global/plugins/fancybox/source/jquery.fancybox.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('Template/assets/global/plugins/select2/css/select2.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('Template/assets/global/plugins/select2/css/select2-bootstrap.min.css') }}" rel="stylesheet" type="text/css" />
    <link href="{{ asset('Template/assets/global/css/components-md.min.css') }}" rel="stylesheet" id="style_components" type="text/css" />
    <link href="https://jqueryvalidation.org/files/demo/css/screen.css" rel="stylesheet" type="text/css" />

{% endblock %}

{% block container%}

    <!-- BEGIN PAGE HEADER-->
    <!-- BEGIN THEME PANEL -->

    <!-- END THEME PANEL -->
    <!-- BEGIN PAGE BAR -->

    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <a href="/">Accueil</a>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <span>Gestion des roles</span>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <span>Modifier role</span>

            </li>
        </ul>

    </div>
    <!-- END PAGE BAR -->
    <!-- BEGIN PAGE TITLE-->
    <h1 class="page-title"> Modifier role
        <small></small>
    </h1>
    <!-- END PAGE TITLE-->
    <!-- END PAGE HEADER-->
    <div class="row">
        <div class="col-md-12">
            <form class="form-horizontal form-row-seperated" action="{{ path('editrole' , {'id': role.id } ) }}" method="post" id="signupForm">
                <div class="portlet">
                    <div class="portlet-title">
                        <div class="caption">
                            <i class="fa fa-user-plus"></i>{{ role.nom }} </div>
                        <div class="actions btn-set">

                            <button class="btn btn-success">
                                <i class="fa fa-check"></i> Save</button>


                        </div>
                    </div>
                    <div class="portlet-body">

                        <div class="tabbable-line">
                            <ul class="nav nav-tabs nav-tabs-lg">
                                <li class="active">
                                    <a href="#tab_0" data-toggle="tab"> Général </a>
                                </li>
                                <li>
                                    <a href="#tab_1" data-toggle="tab"> Permissions

                                    </a>
                                </li>

                            </ul>
                            <div class="tab-content">
                                <div class="tab-pane active" id="tab_0">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-4" for="libele" style="text-align: start">Libele
                                                        <span class="required" style="font-size: large"> * </span>
                                                    </label>
                                                    <div class="col-md-8">
                                                        <input type="text" name="libele" id="libele" data-required="1" class="form-control" value="{{ role.nom }}" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="control-label col-md-4" for="location" style="text-align: start">Description
                                                        <span class="required" style="font-size: large"> * </span>
                                                    </label>
                                                    <div class="col-md-8">
                                                        <input type="text" name="description" id="description" data-required="1" class="form-control"value=" {{ role.description }}" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="tab-pane " id="tab_1">
                                    <div class="row">
                                        <h3 class="block" style="font-size: 20px ; text-align: center ;padding-bottom: 25px; ">Clients</h3>
                                        <div class="col-md-10">
                                            <div class="col-md-3 ">
                                                <div class="form-group">
                                                    <label class="control-label col-md-9 "> Ajouter


                                                    </label>
                                                    <div class="col-md-3">
                                                        <input type="checkbox" name="ajouterclient" id="ajouterclient" class="make-switch"   data-on-color="success" data-off-color="warning" data-on-text="Oui" data-off-text="Non"  >
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="control-label col-md-9">Modifier


                                                    </label>
                                                    <div class="col-md-3">
                                                        <input type="checkbox" name="modifierclient" id="modifierclient" class="make-switch"  data-on-color="success" data-off-color="warning" data-on-text="Oui" data-off-text="Non" >
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="control-label col-md-9">Supprimer


                                                    </label>
                                                    <div class="col-md-3">
                                                        <input type="checkbox" name="supprimerclient"  id="supprimerclient" class="make-switch"  data-on-color="success" data-off-color="warning" data-on-text="Oui" data-off-text="Non" >
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="col-md-3">
                                                <div class="form-group">
                                                    <label class="control-label col-md-9">Afficher


                                                    </label>
                                                    <div class="col-md-3">
                                                        <input type="checkbox" name="voirclient"  id="voirclient" class="make-switch"  data-on-color="success" data-off-color="warning" data-on-text="Oui" data-off-text="Non" >
                                                    </div>
                                                </div>
                                            </div>


                                        </div>
                                    </div>
                                    <hr>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </div>

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('Template/assets/global/plugins/jquery-validation/js/jquery.validate.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/pages/scripts/form-validation.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/select2/js/select2.full.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/jquery-validation/js/additional-methods.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/scripts/datatable.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/datatables/datatables.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/pages/scripts/table-datatables-buttons.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/pages/scripts/ecommerce-products-edit.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/bootstrap-maxlength/bootstrap-maxlength.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/fancybox/source/jquery.fancybox.pack.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/global/plugins/plupload/js/plupload.full.min.js') }}" type="text/javascript"></script>
    <script src="https://rawgit.com/RobinHerbots/jquery.inputmask/3.x/dist/jquery.inputmask.bundle.js" type="text/javascript"></script>
    <script src="{{ asset('Template/assets/pages/scripts/ecommerce-orders-view.min.js') }}" type="text/javascript"></script>



    <script>






        $().ready(function() {
            var $id = {{ role.id }}
            $('#ajouterclient').bootstrapSwitch('state',false);
            $('#modifierclient').bootstrapSwitch('state',false);
            $('#supprimerclient').bootstrapSwitch('state',false);
            $('#voirclient').bootstrapSwitch('state',false);
            $.getJSON("{{ url('dashboard') }}api/roles/"+$id+'/permissions', function( data ) {
                $.each($(data), function(key, value) {


                    if (value['permission']['libele']==="ajouterclient") {



                        $('#ajouterclient').bootstrapSwitch('state',true);


                    }
                    if (value['permission']['libele']==="modifierclient") {



                        $('#modifierclient').bootstrapSwitch('state',true);



                    }
                    if (value['permission']['libele']==="supprimerclient") {


                        $('#supprimerclient').bootstrapSwitch('state',true);



                    }
                    if (value['permission']['libele']==="voirclient") {



                        $('#voirclient').bootstrapSwitch('state',true);



                    }


                });
            });

            $("#signupForm").validate({
                rules: {

                    libele: {
                        required: true,
                        minlength: 4

                    },
                    description: {
                        minlength: 4

                    }






                },
                messages: {

                    libele: {
                        required: "Ce champ est obligatoire",
                        minlength: "Ce champ doit contenir 4 caractères au minimum"
                    },

                    description: {
                        minlength: "Ce champ doit contenir 4 caractères au minimum"
                    }





                }
            });

        });


    </script>








{% endblock %}
